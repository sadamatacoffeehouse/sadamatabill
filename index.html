<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SADAMATA COFFEE HOUSE - INVOICE</title>
  <style>
    * {
      font-family: 'Courier New', monospace;
      box-sizing: border-box;
    }
    body {
      max-width: 350px;
      margin: auto;
      background: #f4f4f4;
      padding: 10px;
    }
    .center {
      text-align: center;
    }
    .bold {
      font-weight: bold;
    }
    .border-box {
      border: 1px solid #000;
      padding: 5px;
      margin: 10px 0;
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    table td, table th {
      border-bottom: 1px dashed #000;
      padding: 4px;
    }
    #items td {
      text-align: right;
    }
    #items td:first-child {
      text-align: left;
    }
    .totals td {
      font-weight: bold;
      text-align: right;
    }
    .totals td:first-child {
      text-align: left;
    }
    .line {
      border-top: 1px solid #000;
      margin: 8px 0;
    }
    #qrcode {
      margin: 10px auto;
      text-align: center;
    }
    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 5px;
      margin-bottom: 5px;
    }
    button {
      width: 100%;
      padding: 8px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="center bold">
    SADAMATA COFFEE HOUSE<br>
    Sadamata Village, Ekterpur, Noapara, Jeshore
  </div>  <div class="border-box bold">INVOICE</div>  <div>
    <input type="text" id="customer" placeholder="Customer Name">
    <input type="text" id="item" placeholder="Item Name">
    <input type="number" id="qty" placeholder="Quantity">
    <input type="number" id="price" placeholder="Price">
    <button onclick="addItem()">Add Item</button>
  </div>  <table id="items">
    <thead>
      <tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr>
    </thead>
    <tbody></tbody>
  </table>  <div class="line"></div>  <div>
    <label>Discount (%): <input type="number" id="discount" value="0" onchange="updateTotals()"></label>
  </div>  <table class="totals">
    <tr><td>Subtotal</td><td id="subtotal">0</td></tr>
    <tr><td>Discount</td><td id="discountAmt">0</td></tr>
    <tr><td>Total</td><td id="total">0</td></tr>
  </table>  <div id="qrcode"></div>  <div class="center">Have a nice day!<br><small>Authorized by Admin</small></div><button onclick="printBill()">Print</button>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>  <script>
    let billNo = localStorage.getItem('billNo') || 1;
    let items = [];

    function addItem() {
      const item = document.getElementById('item').value;
      const qty = parseFloat(document.getElementById('qty').value);
      const price = parseFloat(document.getElementById('price').value);
      if (item && qty && price) {
        items.push({ item, qty, price });
        renderItems();
        updateTotals();
        document.getElementById('item').value = '';
        document.getElementById('qty').value = '';
        document.getElementById('price').value = '';
      }
    }

    function renderItems() {
      const tbody = document.querySelector('#items tbody');
      tbody.innerHTML = '';
      items.forEach(({ item, qty, price }) => {
        const row = `<tr><td>${item}</td><td>${qty}</td><td>${price}</td><td>${(qty * price).toFixed(2)}</td></tr>`;
        tbody.innerHTML += row;
      });
    }

    function updateTotals() {
      let subtotal = items.reduce((sum, i) => sum + i.qty * i.price, 0);
      const discountPercent = parseFloat(document.getElementById('discount').value || 0);
      const discountAmt = subtotal * discountPercent / 100;
      const total = subtotal - discountAmt;

      document.getElementById('subtotal').innerText = subtotal.toFixed(2);
      document.getElementById('discountAmt').innerText = discountAmt.toFixed(2);
      document.getElementById('total').innerText = total.toFixed(2);

      generateQR(total.toFixed(2));
    }

    function generateQR(text) {
      const qr = document.getElementById('qrcode');
      qr.innerHTML = '';
      QRCode.toCanvas(document.createElement('canvas'), `Total: ${text}`, function (err, canvas) {
        qr.appendChild(canvas);
      });
    }

    function printBill() {
      localStorage.setItem('billNo', parseInt(billNo) + 1);
      window.print();
    }
  </script></body>
</html>
